@{
    ViewData["Title"] = "OnlineShop";
}

<div class="panel panel-primary">
    <div class="panel-body">
        <div class="form-group">
            <label>帳號</label>
            <input type="text" class="form-control">
        </div>
        <div class="form-group">
            <label>密碼</label>
            <input type="password" class="form-control">
        </div>
        @*<div class="form-group">
            <label>確認密碼</label>
            <input type="password" class="form-control">
        </div>*@
        <div class="form-group">
            <label>手機號碼</label>
            <input type="password" class="form-control">
        </div>
        <div class="form-group">
            <label>信箱</label>
            <input type="password" class="form-control" asp-action="Mail">
        </div>
        @*<div class="form-group">
            <label>認證碼</label>
            <input type="password" class="form-control">
        </div>*@
    </div>
    <div class="panel-footer">
        <button type="button" class="btn btn-primary" asp-action="DoSignup">註冊</button>
    </div>
</div>

@section scripts {
    <script>
        var VuePage = new Vue({
            el: '#VuePage'
            , data: function () {
                var data = {
                    form: {}
                };
                return data;
            }
            , methods: {
                // 執行註冊按鈕
                DoSignup: function () {
                    var self = this;

                    // 組合表單資料
                    var postData = {};
                    postData['UserID'] = self.form.UserID;
                    postData['UserPwd'] = self.form.UserPwd;
                    postData['UserName'] = self.form.UserName;
                    postData['UserEmail'] = self.form.UserEmail;

                    // 使用 Ajax 傳送至後端
                    $.ajax({
                        url:"OnlineShop/OnlineShopSelectDto",
                        method:"POST",
                        dataType:"json",
                        success: function (datas) {
                            if (datas.ErrMsg) {
                                alert(datas.ErrMsg);
                                return;
                            }
                            alert(datas.ResultMsg);
                        },
                        error: function (err) {
                            $('#ErrorMsg').html(err.responseText);
                            $('#ErrorAlert').modal('toggle');
                        },
                    });
                }
            }
        })
    </script>
}
